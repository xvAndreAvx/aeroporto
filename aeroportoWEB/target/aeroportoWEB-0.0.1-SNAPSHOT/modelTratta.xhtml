<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="jakarta.faces.html" xmlns:f="jakarta.faces.core"
	xmlns:p="http://primefaces.org/ui" xmlns:ui="jakarta.faces.facelets">

	<div style="max-width: 440px; margin: 2rem auto;">
		<div class="p-text-center" style="padding: 1.5rem 1.5rem 1rem;">

			<p:panel header="Inserisci Nuova Tratta">
				<p:messages id="messagesTratta" showDetail="true" closable="true" />
				<div class="ui-fluid">

					<p:outputLabel for="aeroportoPartenza"
						value="Aeroporto di Partenza:" />
					<p:selectOneMenu id="aeroportoPartenza"
						value="#{trattaBean.idAeroportoPartenza}">
						<f:selectItem itemLabel="Seleziona aeroporto" itemValue="" />
						<f:selectItems
							value="#{trattaBean.getListaAeroportiPerPartenza(aeroportoBean.listaAeroporti)}"
							var="aeroporto"
							itemLabel="#{aeroporto.nome} (#{aeroporto.citta})"
							itemValue="#{aeroporto.id}" />
						<p:ajax event="change"
							listener="#{trattaBean.onAeroportoPartenzaChange}"
							update="aeroportoArrivo messagesTratta" />
					</p:selectOneMenu>
					<br />

					<p:outputLabel for="aeroportoArrivo" value="Aeroporto di Arrivo" />
					<p:selectOneMenu id="aeroportoArrivo"
						value="#{trattaBean.idAeroportoArrivo}">
						<f:selectItem itemLabel="Seleziona aeroporto" itemValue="" />
						<f:selectItems
							value="#{trattaBean.getListaAeroportiPerArrivo(aeroportoBean.listaAeroporti)}"
							var="aeroporto"
							itemLabel="#{aeroporto.nome} (#{aeroporto.citta})"
							itemValue="#{aeroporto.id}" />
						<p:ajax event="change"
							listener="#{trattaBean.onAeroportoArrivoChange}"
							update="aeroportoPartenza messagesTratta" />
					</p:selectOneMenu>

					<div class="button-group">
						<p:commandButton value="Crea Tratta"
							action="#{trattaBean.registrazione}" update=":mainForm"
							icon="pi pi-check" 
							style="margin-top: 1rem;" process="@this" />

					</div>

				</div>
			</p:panel>

			<div class="button-group">
				<p:commandButton value="Indietro"
					action="#{navigationController.setCurrentView('HOME')}"
					update=":mainForm" icon="pi pi-arrow-left"
					style="margin-top: 1rem;" />
			</div>

		</div>
	</div>
</ui:composition>